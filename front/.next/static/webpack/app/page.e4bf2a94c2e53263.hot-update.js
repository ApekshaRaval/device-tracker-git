"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./src/hook/useGeoLocation.js":
/*!************************************!*\
  !*** ./src/hook/useGeoLocation.js ***!
  \************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var _context_SocketContext__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/context/SocketContext */ \"(app-pages-browser)/./src/context/SocketContext.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\n\nconst useGeoLocation = ()=>{\n    _s();\n    const { socket, users } = (0,_context_SocketContext__WEBPACK_IMPORTED_MODULE_1__.useSocket)();\n    const [activeUser, setActiveUser] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);\n    const [position, setPosition] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)([\n        51.505,\n        -0.09\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{\n        let activeUser = JSON.parse(localStorage.getItem(\"user\"));\n        setActiveUser(activeUser);\n    }, []);\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{\n        let watchId;\n        if (socket) {\n            const handleGeolocation = (position)=>{\n                const pos = [\n                    position.coords.latitude,\n                    position.coords.longitude\n                ];\n                socket.emit(\"send-location\", {\n                    id: activeUser === null || activeUser === void 0 ? void 0 : activeUser.id,\n                    lat: pos[0],\n                    lang: pos[1]\n                });\n                setPosition(pos);\n                if (activeUser) {\n                    const updatedUser = {\n                        ...activeUser,\n                        lat: pos[0],\n                        lang: pos[1]\n                    };\n                    localStorage.setItem(\"user\", JSON.stringify(updatedUser));\n                    setActiveUser(updatedUser); // Update the ref\n                }\n            };\n            const handleGeolocationError = (error)=>{\n                console.error(\"Error getting location\", error);\n            };\n            if (navigator.geolocation) {\n                watchId = navigator.geolocation.watchPosition(handleGeolocation, handleGeolocationError, {\n                    enableHighAccuracy: true,\n                    timeout: 10000,\n                    maximumAge: 0\n                });\n            }\n        }\n        return ()=>{\n            if (navigator.geolocation && watchId !== undefined) {\n                navigator.geolocation.clearWatch(watchId);\n            }\n            if (socket) {\n                socket.off(\"send-location\");\n            }\n        };\n    }, [\n        socket\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{\n        if (socket) {\n            const handleLocationUpdate = (data)=>{\n                setPosition([\n                    data === null || data === void 0 ? void 0 : data.lat,\n                    data === null || data === void 0 ? void 0 : data.lang\n                ]);\n            };\n            socket.on(\"location\", handleLocationUpdate);\n            return ()=>{\n                socket.off(\"location\", handleLocationUpdate);\n            };\n        }\n    }, [\n        socket\n    ]);\n    if (!activeUser) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            children: \"loading..\"\n        }, void 0, false, {\n            fileName: \"/Users/ztlab128/Desktop/learning/Device-tracker/device-tracker/front/src/hook/useGeoLocation.js\",\n            lineNumber: 67,\n            columnNumber: 16\n        }, undefined);\n    }\n    return {\n        position,\n        users,\n        setPosition\n    };\n};\n_s(useGeoLocation, \"voFr4jlhrFD/S2D9BCq1cONglxk=\", false, function() {\n    return [\n        _context_SocketContext__WEBPACK_IMPORTED_MODULE_1__.useSocket\n    ];\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (useGeoLocation);\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9ob29rL3VzZUdlb0xvY2F0aW9uLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFFb0Q7QUFDUjtBQUU1QyxNQUFNRyxpQkFBaUI7O0lBQ25CLE1BQU0sRUFBRUMsTUFBTSxFQUFFQyxLQUFLLEVBQUUsR0FBR0wsaUVBQVNBO0lBQ25DLE1BQU0sQ0FBQ00sWUFBWUMsY0FBYyxHQUFHTCwrQ0FBUUEsQ0FBQztJQUM3QyxNQUFNLENBQUNNLFVBQVVDLFlBQVksR0FBR1AsK0NBQVFBLENBQUM7UUFBQztRQUFRLENBQUM7S0FBSztJQUV4REQsZ0RBQVNBLENBQUM7UUFDTixJQUFJSyxhQUFhSSxLQUFLQyxLQUFLLENBQUNDLGFBQWFDLE9BQU8sQ0FBQztRQUNqRE4sY0FBY0Q7SUFDbEIsR0FBRyxFQUFFO0lBRUxMLGdEQUFTQSxDQUFDO1FBQ04sSUFBSWE7UUFFSixJQUFJVixRQUFRO1lBQ1IsTUFBTVcsb0JBQW9CLENBQUNQO2dCQUN2QixNQUFNUSxNQUFNO29CQUFDUixTQUFTUyxNQUFNLENBQUNDLFFBQVE7b0JBQUVWLFNBQVNTLE1BQU0sQ0FBQ0UsU0FBUztpQkFBQztnQkFDakVmLE9BQU9nQixJQUFJLENBQUMsaUJBQWlCO29CQUFFQyxFQUFFLEVBQUVmLHVCQUFBQSxpQ0FBQUEsV0FBWWUsRUFBRTtvQkFBRUMsS0FBS04sR0FBRyxDQUFDLEVBQUU7b0JBQUVPLE1BQU1QLEdBQUcsQ0FBQyxFQUFFO2dCQUFDO2dCQUM3RVAsWUFBWU87Z0JBQ1osSUFBSVYsWUFBWTtvQkFDWixNQUFNa0IsY0FBYzt3QkFBRSxHQUFHbEIsVUFBVTt3QkFBRWdCLEtBQUtOLEdBQUcsQ0FBQyxFQUFFO3dCQUFFTyxNQUFNUCxHQUFHLENBQUMsRUFBRTtvQkFBQztvQkFDL0RKLGFBQWFhLE9BQU8sQ0FBQyxRQUFRZixLQUFLZ0IsU0FBUyxDQUFDRjtvQkFDNUNqQixjQUFjaUIsY0FBYyxpQkFBaUI7Z0JBQ2pEO1lBQ0o7WUFFQSxNQUFNRyx5QkFBeUIsQ0FBQ0M7Z0JBQzVCQyxRQUFRRCxLQUFLLENBQUMsMEJBQTBCQTtZQUM1QztZQUVBLElBQUlFLFVBQVVDLFdBQVcsRUFBRTtnQkFDdkJqQixVQUFVZ0IsVUFBVUMsV0FBVyxDQUFDQyxhQUFhLENBQUNqQixtQkFBbUJZLHdCQUF3QjtvQkFDckZNLG9CQUFvQjtvQkFDcEJDLFNBQVM7b0JBQ1RDLFlBQVk7Z0JBQ2hCO1lBQ0o7UUFDSjtRQUVBLE9BQU87WUFDSCxJQUFJTCxVQUFVQyxXQUFXLElBQUlqQixZQUFZc0IsV0FBVztnQkFDaEROLFVBQVVDLFdBQVcsQ0FBQ00sVUFBVSxDQUFDdkI7WUFDckM7WUFDQSxJQUFJVixRQUFRO2dCQUNSQSxPQUFPa0MsR0FBRyxDQUFDO1lBQ2Y7UUFDSjtJQUNKLEdBQUc7UUFBQ2xDO0tBQU87SUFFWEgsZ0RBQVNBLENBQUM7UUFDTixJQUFJRyxRQUFRO1lBQ1IsTUFBTW1DLHVCQUF1QixDQUFDQztnQkFDMUIvQixZQUFZO29CQUFDK0IsaUJBQUFBLDJCQUFBQSxLQUFNbEIsR0FBRztvQkFBRWtCLGlCQUFBQSwyQkFBQUEsS0FBTWpCLElBQUk7aUJBQUM7WUFDdkM7WUFDQW5CLE9BQU9xQyxFQUFFLENBQUMsWUFBWUY7WUFDdEIsT0FBTztnQkFDSG5DLE9BQU9rQyxHQUFHLENBQUMsWUFBWUM7WUFDM0I7UUFDSjtJQUNKLEdBQUc7UUFBQ25DO0tBQU87SUFFWCxJQUFJLENBQUNFLFlBQVk7UUFDYixxQkFBTyw4REFBQ29DO3NCQUFJOzs7Ozs7SUFDaEI7SUFFQSxPQUFPO1FBQ0hsQztRQUNBSDtRQUNBSTtJQUNKO0FBQ0o7R0FyRU1OOztRQUN3QkgsNkRBQVNBOzs7QUFzRXZDLCtEQUFlRyxjQUFjQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9ob29rL3VzZUdlb0xvY2F0aW9uLmpzPzAzNDIiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnO1xuXG5pbXBvcnQgeyB1c2VTb2NrZXQgfSBmcm9tICdAL2NvbnRleHQvU29ja2V0Q29udGV4dCc7XG5pbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuXG5jb25zdCB1c2VHZW9Mb2NhdGlvbiA9ICgpID0+IHtcbiAgICBjb25zdCB7IHNvY2tldCwgdXNlcnMgfSA9IHVzZVNvY2tldCgpO1xuICAgIGNvbnN0IFthY3RpdmVVc2VyLCBzZXRBY3RpdmVVc2VyXSA9IHVzZVN0YXRlKG51bGwpO1xuICAgIGNvbnN0IFtwb3NpdGlvbiwgc2V0UG9zaXRpb25dID0gdXNlU3RhdGUoWzUxLjUwNSwgLTAuMDldKTtcblxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGxldCBhY3RpdmVVc2VyID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInVzZXJcIikpO1xuICAgICAgICBzZXRBY3RpdmVVc2VyKGFjdGl2ZVVzZXIpO1xuICAgIH0sIFtdKVxuXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgbGV0IHdhdGNoSWQ7XG5cbiAgICAgICAgaWYgKHNvY2tldCkge1xuICAgICAgICAgICAgY29uc3QgaGFuZGxlR2VvbG9jYXRpb24gPSAocG9zaXRpb24pID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBwb3MgPSBbcG9zaXRpb24uY29vcmRzLmxhdGl0dWRlLCBwb3NpdGlvbi5jb29yZHMubG9uZ2l0dWRlXTtcbiAgICAgICAgICAgICAgICBzb2NrZXQuZW1pdChcInNlbmQtbG9jYXRpb25cIiwgeyBpZDogYWN0aXZlVXNlcj8uaWQsIGxhdDogcG9zWzBdLCBsYW5nOiBwb3NbMV0gfSk7XG4gICAgICAgICAgICAgICAgc2V0UG9zaXRpb24ocG9zKTtcbiAgICAgICAgICAgICAgICBpZiAoYWN0aXZlVXNlcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVkVXNlciA9IHsgLi4uYWN0aXZlVXNlciwgbGF0OiBwb3NbMF0sIGxhbmc6IHBvc1sxXSB9O1xuICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInVzZXJcIiwgSlNPTi5zdHJpbmdpZnkodXBkYXRlZFVzZXIpKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0QWN0aXZlVXNlcih1cGRhdGVkVXNlcik7IC8vIFVwZGF0ZSB0aGUgcmVmXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgY29uc3QgaGFuZGxlR2VvbG9jYXRpb25FcnJvciA9IChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBnZXR0aW5nIGxvY2F0aW9uXCIsIGVycm9yKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGlmIChuYXZpZ2F0b3IuZ2VvbG9jYXRpb24pIHtcbiAgICAgICAgICAgICAgICB3YXRjaElkID0gbmF2aWdhdG9yLmdlb2xvY2F0aW9uLndhdGNoUG9zaXRpb24oaGFuZGxlR2VvbG9jYXRpb24sIGhhbmRsZUdlb2xvY2F0aW9uRXJyb3IsIHtcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlSGlnaEFjY3VyYWN5OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB0aW1lb3V0OiAxMDAwMCwgLy8gSW5jcmVhc2VkIHRpbWVvdXQgdG8gMTAgc2Vjb25kc1xuICAgICAgICAgICAgICAgICAgICBtYXhpbXVtQWdlOiAwLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIGlmIChuYXZpZ2F0b3IuZ2VvbG9jYXRpb24gJiYgd2F0Y2hJZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbmF2aWdhdG9yLmdlb2xvY2F0aW9uLmNsZWFyV2F0Y2god2F0Y2hJZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc29ja2V0KSB7XG4gICAgICAgICAgICAgICAgc29ja2V0Lm9mZihcInNlbmQtbG9jYXRpb25cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfSwgW3NvY2tldF0pO1xuXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKHNvY2tldCkge1xuICAgICAgICAgICAgY29uc3QgaGFuZGxlTG9jYXRpb25VcGRhdGUgPSAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgIHNldFBvc2l0aW9uKFtkYXRhPy5sYXQsIGRhdGE/LmxhbmddKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBzb2NrZXQub24oXCJsb2NhdGlvblwiLCBoYW5kbGVMb2NhdGlvblVwZGF0ZSk7XG4gICAgICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgICAgIHNvY2tldC5vZmYoXCJsb2NhdGlvblwiLCBoYW5kbGVMb2NhdGlvblVwZGF0ZSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfSwgW3NvY2tldF0pO1xuXG4gICAgaWYgKCFhY3RpdmVVc2VyKSB7XG4gICAgICAgIHJldHVybiA8ZGl2PmxvYWRpbmcuLjwvZGl2PlxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIHBvc2l0aW9uLFxuICAgICAgICB1c2VycyxcbiAgICAgICAgc2V0UG9zaXRpb25cbiAgICB9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgdXNlR2VvTG9jYXRpb247XG4iXSwibmFtZXMiOlsidXNlU29ja2V0IiwidXNlRWZmZWN0IiwidXNlU3RhdGUiLCJ1c2VHZW9Mb2NhdGlvbiIsInNvY2tldCIsInVzZXJzIiwiYWN0aXZlVXNlciIsInNldEFjdGl2ZVVzZXIiLCJwb3NpdGlvbiIsInNldFBvc2l0aW9uIiwiSlNPTiIsInBhcnNlIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsIndhdGNoSWQiLCJoYW5kbGVHZW9sb2NhdGlvbiIsInBvcyIsImNvb3JkcyIsImxhdGl0dWRlIiwibG9uZ2l0dWRlIiwiZW1pdCIsImlkIiwibGF0IiwibGFuZyIsInVwZGF0ZWRVc2VyIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsImhhbmRsZUdlb2xvY2F0aW9uRXJyb3IiLCJlcnJvciIsImNvbnNvbGUiLCJuYXZpZ2F0b3IiLCJnZW9sb2NhdGlvbiIsIndhdGNoUG9zaXRpb24iLCJlbmFibGVIaWdoQWNjdXJhY3kiLCJ0aW1lb3V0IiwibWF4aW11bUFnZSIsInVuZGVmaW5lZCIsImNsZWFyV2F0Y2giLCJvZmYiLCJoYW5kbGVMb2NhdGlvblVwZGF0ZSIsImRhdGEiLCJvbiIsImRpdiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/hook/useGeoLocation.js\n"));

/***/ })

});